addons:
  apt:
    packages:
    - realpath
language: python
python:
- "3.6"
services: docker
env:
  global:
  - GITHUB_USER=joeblackwaslike
  - GITHUB_ORG=joeblackwaslike
  - DOCKER_USER=joeblackwaslike
  - DOCKER_ORG=joeblackwaslike
  # DOCKER_PASS
  - secure: "jN03FvQuHWmcj5S727OgU7x+QLI0yNMI+Ox8VNgJUExl/YfNwAK7fj0a9+Y4asNqZv1xk0jSoadV4MfvjtPrDYBIyOyakVwas4Q6ZiaWKY/JcuMG4Yt0jPDLdFZEQYqUoCPLVu5zksNMPXrsSv1RCz9aGcmtk7QtFuPcxKDnLVNf0np1ua0Vrht9m0azjaYbxSCXtresE65TczG4Q0pQbIuw/c5SW3JCQgRO5dgZkNoHTqSmkT+HYEaThPcFZsAKt/rDBb3sGm4Aq0nR003L7knB4+qxsIuxdLQYKB55s3pjEc9WWmRKHrdrIE9dhspvjSjQb2/dYZiCRKUg6qxkORTyRe6gOpBhT0XRr6EM6wTtZBaaV/8F4JqhLt9VG5va9s4+v9sHaWHJBX7mlsEj5sT6sAF0Oj+yW8XD4X7GOUynmwi1ztDFuZaOd0ezd7vRukIpsMYldOwF++hNbWTfyxvo6AwPI6DrfEJct+tZ2odZO59oQGUWKOXpupGAcX2K6PXmxoSS/+AicmSNMyxMBOTtn7JYgFcqG6Q4+riUcOexzd8+J0SNhv3FJ902iAc3zT3uYnZMVnilSdqNzg4LKN/GFOkA6SumkK1fCaUoH6UUvOfqdHw+5YehhFLTwBT6TG8ZrZQWcykKL6KvaUuTfvrYlstwMaM1z3145GM6rS4="
notifications:
  email:
    on_success: never
    on_failure: always
  slack:
    rooms:
    - secure: "m7lGEXRY586dZ39agL8E00cshpXfd1nnru4NiDzB/VbHMmBxsf1Ugt4c0HohluSzkRXae+li9jGswyHdSyhjKvlS6QP2Z8WzPIubbGbvzBNMVchA4rSMgMoEkvF2IlBOQHAwNKnK7PXHWIutg7wp1Irb2Vqo8cCXowYqwubLu67hkYn8T178kbcXHf7W3EXiyKHVyQI18hobq+igylwHrEcYYiVOKTTu8D7D5S+3HnfOw2Tk7ofFs5rxmWIh9fA6ZKQ1c1vUkvM94NnSDbW9+T15UUw1bUHPQhxQpfvWW35L/HbnTXBnTGTVrv6+D0A3IKLEaoryROhH3eQ/NdvkcA+GbcYOw1wEofqyKxzdP4OSt9w/Gr4H8anRemVo0Es/cgDuCUKbbGUncWiAPWIGe0Za6kGuiKVuZbkvz8dvCrNH5KGZuvR+E+18y033G4CsMuxTlUZQseyBR748NrxWeN82xhrz2ybvqKlK2VrgMU4htA3r4MAQbs1zqQqcYZ1qh1IgdTXnAoizz0sIuitELXTWwQRlAL2TyqOneZaX/dv/XBiiYH0Z5my1KXOwJPOvobaWXDVTd05+9vjSLLx8B4Cyx7RsuSHtTennIr0N9yUSeJgGQjDwwREfPM9IePL1G8CSSBlsibiewm83ch6JAHkQfFK/KBqgioYz8QG3VwA="
    on_success: always
    on_failure: always
before_install:
- source scripts/ci/environment.sh
- pip3 install pyinvoke

install: inv docker.build

script: inv test

after_success:
- ci-tag-build
- hub-push
- hub-update-readme

deploy:
  provider: pypi
  user: joeblackwaslike
  password:
    secure: "DeC6MdjEGvWkD5QQNERlrOasx7FnD2RchwN0bwPW0+bDDsWefmnsQh7nb/Y/+ZHJ2ivCXYHhrAGaBrvAg3GBbwydLiw3vkT8bEpXObMOp8+h0VaL6zMDuNRae+3gb0XtJb/Jk+3UQVnt9Ly0K04shDdfCQb9+F8vOFu7NBv5UB4yj0LuZ4TY/I1PK9lKVmY+njUeklXS5hvVd1/3YslGTC/iXhF/mFJKGhfYokWhDADfdHyBFDNYQ60ke0ZBFM0o3YgNIO8UIlt3ZhFnGB69dDP6BWv0M8JVvg9nyBF3BtciYJvras1/RirrIQ8aS26xydZDphDoq5gjbmeKZLoKP/dY2jOz4h/EtwW3pK/O3cOlE5WD/SJ+TUjlyiGkNY4gzDfbkfg2O2azITf7e/KjMVcBcUzim/sWHk80rOHj7oxGdy5H0xjUcquctHxa+JHVMh9GWZ9kDo9T5BPAoL1pzuabhRqCF8TST4Ax0eZyY58LdG21FVJIIbQBzWr9Ec1VGWVt4pLXWcUjZWHuBKspNjlhgqnceyxJGl31AG31qH3F/XWyaQxh/ZzSImbBXaqzTABgfIl6nLreCzJK82ja1jd3Euyn3qh/DDCbnBLKZIyrzNmth4tocNZ4V/+WE+OVC56OcG82meJDRajUJQTvpAnq5XJ144oJ5z+NX2i/8+g="
  on:
    tags: true